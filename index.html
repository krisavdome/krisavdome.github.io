<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>крысавдоме</title>
    <style>
        @font-face {
            font-family: 'Fritz Quadrata Cyrillic';
            src: url('./FritzQuadrataCyrillic.woff2') format('woff2'),
            url('./FritzQuadrataCyrillic.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }

        .fritz-font {
            font-family: 'Fritz Quadrata Cyrillic', sans-serif;
            font-style: normal;
            font-weight: normal;
        }

        body {
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            background-color: #000;
            color: #fff;
            font-family: 'Fritz Quadrata Cyrillic', sans-serif;
            font-style: normal;
            font-weight: normal;
        }

        h1 {
            display: block;
            position: relative;
            text-align: center;
            font-size: 5vw;
            font-family: 'Fritz Quadrata Cyrillic', sans-serif;
            font-style: normal;
            font-weight: normal;
        }

        img {
            display: block;
            max-width: 100%;
            height: auto;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        .image-container {
            position: relative;
            left: 0;
            top: 5vw;
            max-width: 100%;
            z-index: 4;
        }

        table.infobox {
            width: 15vw;
            text-align: left;
            font-size: 0.7vw;
            line-height: 1.5em;
            border: 2px solid white;
            position: relative;
            top: -15vw;
            right: 2vw;
            font-family: 'Fritz Quadrata Cyrillic', sans-serif;
            font-style: normal;
            font-weight: normal;
        }

        .infobox th {
            background-color: #ff85da;
            font-size: 1.3vw;
            border: 1px solid white;
        }

        .infobox td {
            text-align: center;
            font-size: 1.1vw;
            border: 1px solid white;
        }

        p {
            font-size: 2vw;
            position: relative;
            top: 5vw;
        }

        .question-box {
            position: relative;
            width: 100%;
            max-width: 60vw;
            display: block;
            margin: 2vw 0 2vw 0;
            margin-left: 0;
            padding: 1.5vw 2vw;
            text-align: left;
            z-index: 10;
            white-space: pre-line;
        }

        .question-text {
            font-family: 'Fritz Quadrata Cyrillic', sans-serif;
            font-style: normal;
            font-weight: normal;
            font-size: 2.5vw;
            margin-bottom: 3vw;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            display: block;
            width: 100%;
            box-sizing: border-box;
        }

        .answer-buttons {
            display: flex;
            justify-content: flex-start;
            gap: 3vw;
            flex-wrap: wrap;
        }

        .answer-btn {
            padding: 1.5vw 3vw;
            font-family: 'Fritz Quadrata Cyrillic', sans-serif;
            font-style: normal;
            font-weight: normal;
            font-size: 1.8vw;
            background: transparent;
            border: none;
            outline: none;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
        }

        .answer-btn:hover {
            transform: scale(1.05);
        }

        .question-box.hidden {
            display: none;
        }

        /* Общие классы для hover эффектов */
        .hover-scale {
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .hover-scale:hover {
            transform: scale(1.1);
        }

        .hover-scale-flip {
            transition: transform 0.3s ease;
            cursor: pointer;
            transform: scaleX(-1);
        }

        .hover-scale-flip:hover {
            transform: scaleX(-1) scale(1.1);
        }

        /* Класс для позиционирования элементов */
        .positioned-element {
            position: relative;
            width: fit-content;
            height: fit-content;
            display: inline-block;
        }

        /* Класс для hover текста */
        .hover-text {
            position: absolute;
            color: white;
            font-size: 2vw;
            opacity: 0;
            transition: opacity 0.3s ease;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            z-index: 6;
        }

        /* Классы для позиционирования элементов */
        .position-top-28-left-35 {
            position: relative;
            top: 28vw;
            left: 35vw;
        }

        .position-top-10-left-10 {
            position: relative;
            top: 10vw;
            left: 10vw;
        }

        .position-top-neg10-left-67 {
            position: relative;
            top: -10vw;
            left: 67vw;
        }

        .position-center-auto {
            position: relative;
            margin: 6vw auto;
        }

        /* Стили для aside (заменяет table.infobox) */
        aside.infobox {
            width: 15vw;
            text-align: left;
            font-size: 0.7vw;
            line-height: 1.5em;
            border: 2px solid #1a1a1a;
            position: relative;
            top: -15vw;
            right: 2vw;
            font-family: 'Fritz Quadrata Cyrillic', sans-serif;
            font-style: normal;
            font-weight: normal;
            float: right;
            border-collapse: collapse;
            background-color: transparent;
        }

        aside.infobox > div:nth-child(odd) {
            background-color: #ff85da;
            font-size: 1.3vw;
            border: 1px solid #1a1a1a;
            padding: 0.4vw 0.8vw;
            text-align: center;
            font-weight: bold;
            margin: 0.2vw;
        }

        aside.infobox > div:nth-child(even) {
            text-align: center;
            font-size: 1.1vw;
            border: 1px solid #1a1a1a;
            padding: 0.5vw 0.8vw;
            background-color: transparent;
            margin: 0.2vw;
        }
    </style>
</head>

<body>
    <header class="header" style="position: sticky; top: 0; z-index: 100; height: 8vmax; display: flex; align-items: center; justify-content: center;">
        <div class="header-bg" style="position: absolute; top: 0; width: 100%; height: 120%; backdrop-filter: blur(10px); background: rgba(255, 255, 255, 0); z-index: -1; mask-image: linear-gradient(to bottom, rgba(0, 0, 0, 1) 70%, rgba(0, 0, 0, 0) 100%);">
        </div>
        <img src="./krisavdome.png" alt="krisavdome" style="height: 6vmax; margin: 0 auto;">
    </header>

    <main>
        <div id="dialogContainer" style="display: flex; align-items: flex-start; gap: 2vw; max-width: 100vw; padding: 2vw;">
            <img src="peschanka.png" alt="Peschanka" style="width: 20vw; object-fit: contain; margin-left: 5vw; align-self: center;">
            <div id="questionsWrapper" style="flex: 1;">
                <!-- Интерактивный блок с вопросами -->
                <section id="questionBox" class="question-box">
                    <div class="question-text" id="questionText">стой, у меня к тебе серьезный разговор</div>
                    <div class="answer-buttons">
                        <button class="answer-btn" onclick="selectAnswer('ready')">я готов</button>
                        <button class="answer-btn" onclick="selectAnswer('notready')">я не готов</button>
                    </div>
                </section>

                <section id="questionBox2" class="question-box hidden">
                    <div class="question-text" id="questionText2">как так вышло, что ты до сих пор не осознал что происходит?</div>
                    <div class="answer-buttons">
                        <button class="answer-btn" onclick="selectAnswer('dontunderstand')">я не понимаю о чем ты</button>
                        <button class="answer-btn" onclick="selectAnswer('understand')">я осознал</button>
                    </div>
                </section>

                <section id="questionBox3" class="question-box hidden">
                    <div class="question-text" id="questionText3">об ущемлении твоих прав</div>
                    <div class="answer-buttons">
                        <button class="answer-btn" onclick="selectAnswer('gotcha')">понял</button>
                        <button class="answer-btn" onclick="selectAnswer('notgotcha')">не понял</button>
                    </div>
                </section>

                <section id="questionBox4" class="question-box hidden">
                    <div class="question-text" id="questionText4">хорошо</div>
                    <div class="answer-buttons">
                        <button class="answer-btn" onclick="selectAnswer('ready')">5</button>
                    </div>
                </section>

                <section id="questionBox5" class="question-box hidden">
                    <div class="question-text" id="questionText5">и все еще молчишь?</div>
                    <div class="answer-buttons">
                        <button class="answer-btn" onclick="selectAnswer('ido')">я молчу</button>
                        <button class="answer-btn" onclick="selectAnswer('idont')">я не молчу</button>
                    </div>
                </section>

                <section id="questionBox6" class="question-box hidden">
                    <div class="question-text" id="questionText6">почему</div>
                    <div class="answer-buttons">
                        <button class="answer-btn" onclick="selectAnswer('cant')">1</button>
                        <button class="answer-btn" onclick="selectAnswer('cant2')">2</button>
                    </div>
                </section>

                <section id="finalMessage" class="question-box hidden">
                    <div class="question-text" id="finalText"></div>
                </section>
            </div>
        </div>

        <section class="content-section">
            <div style="display: flex; justify-content: space-evenly; top: 5vw; width: 80vw; position: relative;">




                <div class="hover-scale" style="width: 30%; display: flex; justify-content: center; position: relative;"
                     onmouseover="this.querySelector('.hover-text').style.opacity='1';" 
                     onmouseout="this.querySelector('.hover-text').style.opacity='0';">
                    <div style="position: relative;">
                        <img src="yazva.png" alt="yazva" style="width: 18vw;">
                        <div class="hover-text" style="top: 75%; left: 50%; transform: translateX(-50%); width: 18vw; text-align: center;"></div>
                    </div>
                </div>

                <div class="hover-scale" style="width: 30%; display: flex; justify-content: center; position: relative;"
                     onmouseover="this.querySelector('.hover-text').style.opacity='1';" 
                     onmouseout="this.querySelector('.hover-text').style.opacity='0';">
                    <div style="position: relative;">
                        <img src="./CSTC Circuit Diagram.png" alt="cstc loop" style="width: 18vw;">
                        <div class="hover-text" style="top: 75%; left: 50%; transform: translateX(-50%); width: 18vw; text-align: center;"></div>
                    </div>
                </div>
            </div>
        </section>

        <aside class="infobox">
            <div>Крысы</div>
            <div>
                <img src="./krisavochkah.JPG" alt="крысавдоме" style="width: 15vw; margin: 0 auto; height: 10vw;">
                <br>
                <span>крысавдоме<br>(<i>открой глаза</i>)</span>
            </div>
            <div>что к чему</div>
            <div>
                <div><b>почему сайт такой7</b><br>
                    потому что я так захотел</div>
            </div>

        </aside>

        <div class="positioned-element" style="top: 12vw; left: 5vw;">
            <img src="./krisassirom.png" alt="krisassirom" 
                class="hover-scale-flip"
                style="position: relative; width: 45vw;" 
                onmouseover="this.nextElementSibling.style.opacity='1';" 
                onmouseout="this.nextElementSibling.style.opacity='0';"
                onclick="playSound('ratSound')">
            <div class="hover-text" style="
                left: 4vw;
                top: 18vw;
                width: 45vw;
                text-align: center;
            "></div>
        </div>
    </main>



    <div style="display: flex; position: relative; justify-content: center; align-items: center; gap: 2vw; top: 8vw; width: 100%;">
        <pre style="font-size: 1vw; margin: 0; padding: 0; overflow-x: hidden;">
           .-----------.
        ,-'      |      '-.
     ,-'         |         '-.
    /            |            \
  ,'             |             `.
 ;               |               :
 ;               |               :
;                |                :
|                |                |
|                |                |
:                |                ;
 :               |               ;
 :             +-<-+             ;
  \         +--+ | +--+         /
   `.    +--+    |    +--+    ,'
     \---+       |       +---/
      '-.        |        ,-'
         '-.     v     ,-'
            `---------'
        </pre>
        
        <img src="./krisavdome.gif" alt="bolshie yayca" style="width: 35vw; object-fit: contain;">
        
        <pre style="font-size: 1vw; margin: 0; padding: 0; overflow-x: hidden;">
           .-----------.
        ,-'      |      '-.
     ,-'         |         '-.
    /            |            \
  ,'             |             `.
 ;               |               :
 ;               |               :
;                |                :
|                |                |
|                |                |
:                |                ;
 :               |               ;
 :             +-<-+             ;
  \         +--+ | +--+         /
   `.    +--+    |    +--+    ,'
     \---+       |       +---/
      '-.        |        ,-'
         '-.     v     ,-'
            `---------'
        </pre>
    </div>

    <img src="./cult estetiki.png" 
        class="hover-scale position-top-28-left-35"
        style="width: 30vw;" 
        onmouseover="showHoverText('ваши представления о значимости внешнего иллюзорны. вы не осознаете как оставляете важные<br>вопросы о мире и о себе в тени.')" 
        onmouseout="hideHoverText()">

    <div style="position: relative; width: fit-content;">
        <img src="./commercia.png" 
            class="hover-scale position-top-10-left-10"
            style="width: 20vw;" 
            onmouseover="showHoverText('как только творчество <i>соприкасается</i> с деньгами, оно перестает иметь какую либо культурную<br>ценность.')" 
            onmouseout="hideHoverText()">
        <div id="hoverText" class="hover-text" style="
            position: absolute;
            left: 0;
            top: 180%;
            max-width: 80vw;
            text-align: center;
            color: white;
            font-size: 2vw;
            opacity: 0;
            transition: opacity 0.3s ease;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            z-index: 6;
            transform: translateX(10vw);
            white-space: pre;
            word-wrap: break-word;
        "></div>
    </div>

    <img src="./mass cultura.png" 
        class="hover-scale position-top-neg10-left-67"
        style="width: 30vw;" 
        onmouseover="showHoverText('в большинстве своем, массовая культура — это психотропное вещество, дозирующее смысл<br>до уровня, безопасного для интеллектуального инфантила. всё, что в нейесть — это<br>развлечение, пригодное для потребления тем, кто боится боли мышления.')" 
        onmouseout="hideHoverText()">


            <div class="position-center-auto" style="width: 25vw;">
                <img src="./otkroyglaza.png" alt="otkroy glaza" 
                    class="hover-scale"
                    style="position: relative; width: 100%;" 
                    onmouseover="this.nextElementSibling.style.opacity='1'; playSound('otkroyGlazaSound');"
                    onmouseout="this.nextElementSibling.style.opacity='0';">
                <div class="hover-text" style="
                    position: absolute;
                    left: 50%;
                    top: 16vw;
                    width: 100%;
                    transform: translateX(-50%);
                    text-align: center;
                    color: white;
                    font-size: 2vw;
                    opacity: 0;
                    transition: opacity 0.3s ease;
                    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
                    z-index: 2;
                ">все вокруг потребляют дерьмо, все вокруг и есть дерьмо</div>
            </div>
        


    <footer style="
        width: 100%;
        height: 20vw;
        margin-top: 20vw; /* Отступ от конента */
    "></footer>



    <audio id="ratSound" preload="auto">
        <source src="rat.mp3" type="audio/mpeg">
    </audio>

    <audio id="otkroyGlazaSound" preload="auto">
        <source src="otkroyglaza.mp3" type="audio/mpeg">
    </audio>

    <script>
        /*
        --- КРАТКОЕ ПОЯСНЕНИЕ ПО РЕАЛИЗАЦИИ ---
        Для скрытия всего контента (кроме хедера, футера и финального сообщения) используется рекурсивное скрытие через style.display = 'none'.
        При скрытии исходное значение display сохраняется в data-атрибут, чтобы при возврате восстановить корректное отображение (flex, inline-block, table и т.д.).
        Это важно, потому что простое style.display = '' ломает layout для сложных элементов.
        Для возврата контента restoreAllContent рекурсивно восстанавливает display и удаляет .hidden.
        window._contentHidden — флаг, чтобы restoreAllContent вызывался только если контент реально скрывался (только для варианта "не готов").
        После возврата дополнительно рекурсивно восстанавливается видимость всех потомков questionBox*, чтобы кнопки и текст точно были видимы.
        Такой способ выбран, чтобы:
        - не ломать layout;
        - корректно работать с вложенными и сложными элементами;
        - не трогать хедер, футер и финальное сообщение;
        - избежать багов с кнопками и вложенными блоками;
        - легко расширять и поддерживать код.
        Если потребуется изменить логику — ищите window._contentHidden, restoreAllContent, hideAllContentExceptFinal, resetTest.
        */

        // Функция для воспроизведения звуков
        function playSound(soundId, volume = 0.5) {
            const sound = document.getElementById(soundId);
            if (sound) {
                sound.volume = volume;
                sound.currentTime = 0;
                sound.play().catch(error => {
                    console.log('Ошибка воспроизведения звука:', error);
                });
            }
        }

        // Функции для управления hover текстом
        function showHoverText(text) {
            const hoverText = document.getElementById('hoverText');
            if (hoverText) {
                hoverText.innerHTML = text;
                hoverText.style.opacity = '1';
            } else {
                console.warn('Элемент hoverText не найден');
            }
        }

        function hideHoverText() {
            const hoverText = document.getElementById('hoverText');
            if (hoverText) {
                hoverText.style.opacity = '0';
            }
        }

        // Флаг, скрыт ли контент (true — скрыт, false — показан)
        window._contentHidden = false;

        // Скрывает все элементы внутри body, кроме .header, footer и #finalMessage
        // Сохраняет исходный display в data-атрибут для корректного восстановления
        function hideAllContentExceptFinal() {
            function hideRecursive(element) {
                // Не скрываем .header, footer, #finalMessage
                if (
                    (element.classList && element.classList.contains('header')) ||
                    element.tagName && element.tagName.toLowerCase() === 'footer' ||
                    element.id === 'finalMessage'
                ) return;
                // Сохраняем исходный display, если ещё не сохранён
                if (!element.hasAttribute('data-original-display')) {
                    element.setAttribute('data-original-display', element.style.display || window.getComputedStyle(element).display);
                }
                // Рекурсивно скрываем потомков
                if (element.children && element.children.length > 0) {
                    Array.from(element.children).forEach(hideRecursive);
                }
                element.style.display = 'none';
            }
            Array.from(document.body.children).forEach(hideRecursive);
            // Показываем финальный блок
            var final = document.getElementById('finalMessage');
            if(final) {
                final.style.display = '';
                final.classList.remove('hidden');
            }
            window._contentHidden = true;
        }

        // Восстанавливает все элементы внутри body, кроме #finalMessage
        // Восстанавливает исходный display из data-атрибута, удаляет .hidden
        function restoreAllContent() {
            function showRecursive(element) {
                if (
                    (element.classList && element.classList.contains('header')) ||
                    element.tagName && element.tagName.toLowerCase() === 'footer' ||
                    element.id === 'finalMessage'
                ) return;
                if (element.children && element.children.length > 0) {
                    Array.from(element.children).forEach(showRecursive);
                }
                // Восстанавливаем исходный display
                if (element.hasAttribute('data-original-display')) {
                    element.style.display = element.getAttribute('data-original-display');
                    element.removeAttribute('data-original-display');
                } else {
                    element.style.display = '';
                }
                if (element.classList) element.classList.remove('hidden');
            }
            Array.from(document.body.children).forEach(showRecursive);
            window._contentHidden = false;
        }

        // Основная логика обработки ответов на вопросы
        // В зависимости от выбранного варианта скрывает/показывает нужные блоки
        function selectAnswer(answer) {
            const currentBox = document.querySelector('.question-box:not(.hidden)');
            switch(answer) {
                case 'ready':
                    // Переход ко второму вопросу
                    currentBox.classList.add('hidden');
                    showQuestion('questionBox2');
                    break;
                case 'notready': {
                    // Скрыть весь контент, показать финальное сообщение
                    hideAllContentExceptFinal();
                    showFinalMessage('не готов?\n\nточно, ты же привык к формату повестки из военкомата, когда нет варианта отказаться.\n\n надо было наверное не спрашивать у него мнения утютютютю, и он бы покорно стоя на коленях молча открыл рот что бы поймать плевок.\n\n ведь так тебя приучили, да?\n\nпосмотри в зеркало\nты готов к чему угодно кроме ответственности\n\nведь если ты скажешь да, придется думать критически, действовать\n либо открыто признать что ты жалок и безволен\n\nкак бы ты сам назвал такого человека?\nпридумай себе имя\n\n«я не готов» - самая честная фраза за всю твою никчемную жизнь\n\nи как хорошо она описывает тебя во всех сферах.\n\nда тебе видимо не на что жаловаться\nты ведь потерял свой голос не потому что его отняли, а потому что сам зашил свой рот собственными руками.\n\nа был ли у тебя вообще голос?\nвспомни, может твоя дырка на лице изначально была предназначена лишь для поедания дерьма?\n\nпереждать и отмолчаться не выйдет\nведь уже не вышло.\n\nты не «в стороне» - ты соучастник.\n\nну что, хватит мозгов сделать выбор самому:\n\nмолчать дальше и когда все поменяется мнить себя самым умным "переждавшим смуту"\n\nили, может, впервые в жизни взять все в свои руки и хотя бы своим близким заявить о том что ты на самом деле думаешь.\n\nвсе еще не готов, да?');
                    break;
                }
                case 'dontunderstand':
                    // Переход к третьему вопросу
                    currentBox.classList.add('hidden');
                    showQuestion('questionBox3');
                    break;
                case 'understand':
                    // Переход к пятому вопросу
                    currentBox.classList.add('hidden');
                    showQuestion('questionBox5');
                    break;
                case 'gotcha':
                    // Переход к пятому вопросу
                    currentBox.classList.add('hidden');
                    showQuestion('questionBox5');
                    break;
                case 'notgotcha':
                    // Финальное сообщение, не скрываем контент
                    currentBox.classList.add('hidden');
                    showFinalMessage('ты соврал в первом вопросе', false);
                    break;
                case 'ready':
                    // Финальное сообщение, не скрываем контент
                    currentBox.classList.add('hidden');
                    showFinalMessage('2', false);
                    break;
                case 'ido':
                    // Переход к шестому вопросу
                    currentBox.classList.add('hidden');
                    showQuestion('questionBox6');
                    break;
                case 'idont':
                    // Финальное сообщение, не скрываем контент
                    currentBox.classList.add('hidden');
                    showFinalMessage('4', false);
                    break;
            }
        }

        // Сброс теста по клику на krisavdome
        // Скрывает финальный блок, восстанавливает контент, показывает первый вопрос
        function resetTest() {
            // Скрыть финальный блок
            var final = document.getElementById('finalMessage');
            if(final) {
                final.classList.add('hidden');
                final.style.display = '';
            }
            // Показать всё только если было скрыто (только после "не готов")
            if(window._contentHidden) restoreAllContent();

            // Рекурсивно восстановить видимость всех потомков questionBox*
            // Это нужно, чтобы кнопки и текст точно были видимы после возврата
            function restoreBox(boxId) {
                var el = document.getElementById(boxId);
                if(!el) return;
                function restoreRecursive(node) {
                    if(node.hasAttribute && node.hasAttribute('data-original-display')) {
                        node.style.display = node.getAttribute('data-original-display');
                        node.removeAttribute('data-original-display');
                    } else {
                        node.style.display = '';
                    }
                    if(node.classList) node.classList.remove('hidden');
                    if(node.children && node.children.length > 0) {
                        Array.from(node.children).forEach(restoreRecursive);
                    }
                }
                restoreRecursive(el);
            }
            ['questionBox','questionBox2','questionBox3','questionBox4','questionBox5','questionBox6'].forEach(restoreBox);

            // Скрыть все вопросы кроме первого
            ['questionBox2','questionBox3','questionBox4','questionBox5','questionBox6'].forEach(function(id){
                var el = document.getElementById(id);
                if(el) el.classList.add('hidden');
            });
            document.getElementById('questionBox').classList.remove('hidden');
        }

        // Навешиваем обработчик на krisavdome (логотип в хедере)
        // При клике сбрасывает тест, если показан финальный блок
        window.addEventListener('DOMContentLoaded', function() {
            var logo = document.querySelector('.header img[alt="krisavdome"]');
            if(logo) {
                logo.addEventListener('click', function() {
                    // Если финальный блок видим — сбросить тест
                    if(!document.getElementById('finalMessage').classList.contains('hidden')) {
                        resetTest();
                    }
                });
            }
        });
        
        // Показывает вопрос по id (убирает .hidden)
        function showQuestion(boxId) {
            document.getElementById(boxId).classList.remove('hidden');
        }
        
        // Показывает финальное сообщение
        // message — текст, hideContent — скрывать ли весь контент (true только для "не готов")
        function showFinalMessage(message, hideContent) {
            document.getElementById('finalText').textContent = message;
            document.getElementById('finalMessage').classList.remove('hidden');
            if(hideContent) hideAllContentExceptFinal();
        }
        
    </script>
</body>
</html>